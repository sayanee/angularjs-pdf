/*! Angular-PDF Version: 0.2.5 | (C) Sayanee Basu 2014, released under an MIT license */
!function(){"use strict";angular.module("pdf",[]).directive("ngPdf",function($window,$log,$pdfDelegate){return{restrict:"E",template:'<canvas class="rotate0"></canvas>',scope:!0,link:function(scope,element,attrs){var url=scope.$eval(attrs.url),pdfDoc=null,pageNum=1,scale=attrs.scale?attrs.scale:1,canvas=element.find("canvas")[0],ctx=canvas.getContext("2d"),windowEl=angular.element($window);windowEl.on("scroll",function(){scope.$apply(function(){scope.scroll=windowEl[0].scrollY})}),PDFJS.disableWorker=!0,scope.pageNum=pageNum,scope.renderPage=function(num){pdfDoc.getPage(num).then(function(page){var viewport=page.getViewport(scale);canvas.height=viewport.height,canvas.width=viewport.width;var renderContext={canvasContext:ctx,viewport:viewport};page.render(renderContext)})},scope.goPrevious=function(){scope.pageNum<=1||(scope.pageNum=parseInt(scope.pageNum,10)-1,scope.renderPage(scope.pageNum))},scope.goNext=function(){scope.pageNum>=pdfDoc.numPages||(scope.pageNum=parseInt(scope.pageNum,10)+1,scope.renderPage(scope.pageNum))},scope.zoomIn=function(){return scale=parseFloat(scale)+.2,scope.renderPage(scope.pageNum),scale},scope.zoomOut=function(){return scale=parseFloat(scale)-.2,scope.renderPage(scope.pageNum),scale},scope.changePage=function(){scope.renderPage(scope.pageNum)},scope.rotate=function(){"rotate0"===canvas.getAttribute("class")?canvas.setAttribute("class","rotate90"):"rotate90"===canvas.getAttribute("class")?canvas.setAttribute("class","rotate180"):"rotate180"===canvas.getAttribute("class")?canvas.setAttribute("class","rotate270"):canvas.setAttribute("class","rotate0")},PDFJS.getDocument(url).then(function(_pdfDoc){pdfDoc=_pdfDoc,scope.renderPage(scope.pageNum),scope.$apply(function(){scope.pageCount=_pdfDoc.numPages,$pdfDelegate.register(scope,attrs.delegateHandle)})},$log.error),scope.getPageCount=function(){return scope.pageCount},scope.currentPage=function(){return scope.pageNum},scope.goToPage=function(newVal){null!==pdfDoc&&(scope.pageNum=newVal,scope.renderPage(newVal))},scope.$on("$destroy",function(){$pdfDelegate.unregister(attrs.delegateHandle)})}}})}(),/*! Angular-PDF Version: 0.2.5 | (C) Sayanee Basu 2014, released under an MIT license */
function(){angular.module("pdf").provider("$pdfDelegate",function(){var self=this;return self.DEFAULT_PDF_ID="__DEFAULT_PDF_ID__",this.$get=["$q",function($q){var initStoreForId,resolveInStoreById,pdfStore={},exports={};return exports.get=function(id){var id=id||self.DEFAULT_PDF_ID;return pdfStore.hasOwnProperty(id)||initStoreForId(id),pdfStore[id].deferred.promise},exports.register=function(pdf,_id){var id=_id||self.DEFAULT_PDF_ID;pdfStore.hasOwnProperty(id)||initStoreForId(id),pdfStore[id].isResolved&&initStoreForId(id),resolveInStoreById(pdf,id)},exports.unregister=function(_id){var id=_id||self.DEFAULT_PDF_ID;pdfStore.hasOwnProperty(id)&&delete pdfStore[id]},initStoreForId=function(id){pdfStore[id]={deferred:$q.defer(),isResolved:!1}},resolveInStoreById=function(pdf,id){pdfStore[id].deferred.resolve(pdf),pdfStore[id].isResolved=!0},exports}],this})}();